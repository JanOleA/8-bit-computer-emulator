;! name: TESTPRINTF
;! entry: main
;! abi: all
;! callable: yes
;! dps: printf

.text_1 = "This %s has n=%d h=%x. 100%%!"
.text_2 = "Test with %u and %d."
.insert_string = "string"

args_1 = .bss
args_1_end = .bss + 3

args_2 = .bss + 4
args_2_end = .bss + 6

main:
  LDI .insert_string
  STA .args_1
  LDI 42
  STA .args_1 + 1
  STA .args_1 + 2     ; 0x2A
  LDI 0
  STA .args_1 + 3

  LDI .text_1
  PHA
  LDI .args_1
  PHA
  JSR @printf

  LDI 54000
  STA .args_2
  LDI 54000         ; two's complement negative number = -11536
  STA .args_2 + 1
  LDI 0
  STA .args_2 + 2

  LDI .text_2
  PHA
  LDI .args_2
  PHA
  JSR @printf
  RET

