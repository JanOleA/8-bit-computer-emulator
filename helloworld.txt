char = 255
loopval = 254
printloc = 253
text = 240

.printloc  = 240
.text      = "Hello there"

  LDI 53
  STA .loopval
start:
  DIS 1                 ; clear display
  JSR instruction
  DIS 15                ; set on, display cursor, cursor blink
  JSR instruction

helloworld:

printloop:
  JSR get_next_char
  CPI 0
  JPZ end_printloop
  JSR write_char
  JMP printloop
end_printloop:
  LDI 240
  STA .printloc
  LDA .loopval
  CPI 0
  JPZ end_loop
loop:
  LDI 32                ; space
  STA .char
  JSR write_char
  LDA .loopval
  SUI 1
  STA .loopval
  JPZ helloworld
  JMP loop
end_loop:
  HLT

get_next_char:  ; gets the next character from .printloc and increases .printloc by 1
  LDA .printloc
  PHA
  ADI 1
  STA .printloc
  LAS         ; get the value from .printloc into A
  STA .char
  RET

write_char:
  LDD .char
  DIC 0
  DIC 64      ; set read
  DIC 192     ; set read + enable
  DIC 0
  RET

instruction:
  DIC 0
  DIC 128     ; set enable
  DIC 0
  RET